<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matrix Calculator | Addition, Multiplication, Adjoint, Rank, Eigenvalues</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.7.0/math.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #3a7bd5, #00d2ff);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.97);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(to right, #2c3e50, #4a6491);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            padding: 20px;
        }
        
        .left-panel {
            flex: 1;
            min-width: 350px;
            padding: 20px;
        }
        
        .right-panel {
            flex: 1.5;
            min-width: 350px;
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 10px;
            margin-left: 10px;
        }
        
        .matrix-input-section {
            margin-bottom: 30px;
        }
        
        .section-title {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #3498db;
        }
        
        .matrix-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        
        .matrix-tab {
            padding: 10px 20px;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-bottom: none;
            cursor: pointer;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
            transition: all 0.3s;
        }
        
        .matrix-tab:hover {
            background-color: #e9ecef;
        }
        
        .matrix-tab.active {
            background-color: #3498db;
            color: white;
            border-color: #2980b9;
        }
        
        .matrix-size-selector {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .size-input {
            width: 70px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            text-align: center;
            font-size: 1rem;
        }
        
        .btn {
            padding: 10px 20px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }
        
        .btn-calculate {
            background-color: #2ecc71;
        }
        
        .btn-calculate:hover {
            background-color: #27ae60;
        }
        
        .btn-clear {
            background-color: #e74c3c;
        }
        
        .btn-clear:hover {
            background-color: #c0392b;
        }
        
        .matrix-container {
            overflow-x: auto;
            margin-bottom: 20px;
        }
        
        .matrix-table {
            border-collapse: separate;
            border-spacing: 5px;
            margin: 0 auto;
        }
        
        .matrix-cell {
            width: 60px;
            height: 50px;
        }
        
        .matrix-cell input {
            width: 100%;
            height: 100%;
            text-align: center;
            font-size: 1.1rem;
            border: 1px solid #bdc3c7;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .matrix-cell input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 5px rgba(52, 152, 219, 0.5);
        }
        
        .operations-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }
        
        .operation-category {
            margin-bottom: 25px;
        }
        
        .category-title {
            font-size: 1.3rem;
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 1px solid #ddd;
        }
        
        .operation-btn {
            padding: 12px;
            background-color: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
        }
        
        .operation-btn:hover {
            background-color: #e9ecef;
            transform: translateY(-3px);
        }
        
        .operation-btn.selected {
            background-color: #3498db;
            color: white;
            border-color: #2980b9;
        }
        
        .operation-btn i {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }
        
        .operation-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .operation-desc {
            font-size: 0.85rem;
            opacity: 0.8;
        }
        
        .results-section {
            margin-top: 30px;
        }
        
        .result-box {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            margin-top: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-left: 4px solid #3498db;
            display: none;
        }
        
        .result-box h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .result-content {
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            line-height: 1.6;
            overflow-x: auto;
        }
        
        .explanation {
            margin-top: 20px;
            padding: 15px;
            background-color: #f0f7ff;
            border-radius: 8px;
            border-left: 4px solid #2ecc71;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            display: none;
        }
        
        .loading i {
            font-size: 2rem;
            color: #3498db;
            animation: spin 1.5s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error-message {
            color: #e74c3c;
            background-color: #ffeaea;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            display: none;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #7f8c8d;
            font-size: 0.9rem;
            border-top: 1px solid #eee;
            margin-top: 20px;
        }
        
        .close-btn {
            cursor: pointer;
            font-size: 1.5rem;
            padding: 0 10px;
        }
        
        .close-btn:hover {
            color: #e74c3c;
        }
        
        @media (max-width: 1100px) {
            .main-content {
                flex-direction: column;
            }
            
            .right-panel {
                margin-left: 0;
                margin-top: 20px;
            }
            
            .operations-container {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .operation-btn {
                padding: 10px;
            }
        }
        
        .instructions {
            background-color: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
            font-size: 0.9rem;
        }
        
        .matrix-operations {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .scalar-input-group {
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .scalar-input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 120px;
        }
        
        .matrix-comparison {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 10px;
            background-color: #f0f7ff;
            border-radius: 5px;
        }
        
        .matrix-dimension {
            font-weight: bold;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-calculator"></i> Advanced Matrix Calculator</h1>
            <p class="subtitle">Matrix Addition, Multiplication, Adjoint, Rank, Eigenvalues, Eigenvectors & More</p>
        </header>
        
        <div class="main-content">
            <div class="left-panel">
                <div class="matrix-input-section">
                    <h2 class="section-title">Matrix Input</h2>
                    
                    <div class="matrix-tabs">
                        <div class="matrix-tab active" data-matrix="A">Matrix A</div>
                        <div class="matrix-tab" data-matrix="B">Matrix B</div>
                    </div>
                    
                    <div class="matrix-size-selector">
                        <span>Rows:</span>
                        <input type="number" id="rows" class="size-input" min="1" max="6" value="3">
                        <span>Columns:</span>
                        <input type="number" id="cols" class="size-input" min="1" max="6" value="3">
                        <button id="update-matrix" class="btn">Update Matrix</button>
                        <button id="clear-matrix" class="btn btn-clear">Clear Current</button>
                        <button id="clear-all" class="btn btn-clear">Clear All</button>
                    </div>
                    
                    <div class="matrix-container">
                        <table id="matrix-table" class="matrix-table">
                            <!-- Matrix cells will be generated here -->
                        </table>
                    </div>
                    
                    <div class="error-message" id="matrix-error"></div>
                    
                    <div class="instructions">
                        <p><strong>Instructions:</strong> Enter matrix values for Matrix A and Matrix B using the tabs above. For addition, matrices must have the same dimensions. For multiplication, columns of A must equal rows of B.</p>
                        <p style="margin-top: 8px;">For eigenvalues, eigenvectors, inverse, determinant, and adjoint, select Matrix A (must be square).</p>
                    </div>
                </div>
                
                <div class="operations-container">
                    <div class="operation-category">
                        <h3 class="category-title">Linear Algebra Operations</h3>
                        <div class="operations-grid">
                            <div class="operation-btn" data-operation="rank">
                                <i class="fas fa-sort-numeric-up"></i>
                                <div class="operation-name">Rank</div>
                                <div class="operation-desc">Rank of Matrix A</div>
                            </div>
                            
                            <div class="operation-btn" data-operation="eigenvalues">
                                <i class="fas fa-braille"></i>
                                <div class="operation-name">Eigenvalues</div>
                                <div class="operation-desc">Eigenvalues of A</div>
                            </div>
                            
                            <div class="operation-btn" data-operation="eigenvectors">
                                <i class="fas fa-project-diagram"></i>
                                <div class="operation-name">Eigenvectors</div>
                                <div class="operation-desc">Eigenvectors of A</div>
                            </div>
                            
                            <div class="operation-btn" data-operation="det">
                                <i class="fas fa-divide"></i>
                                <div class="operation-name">Determinant</div>
                                <div class="operation-desc">det(A)</div>
                            </div>
                            
                            <div class="operation-btn" data-operation="inverse">
                                <i class="fas fa-exchange-alt"></i>
                                <div class="operation-name">Inverse</div>
                                <div class="operation-desc">A⁻¹</div>
                            </div>
                            
                            <div class="operation-btn" data-operation="transpose">
                                <i class="fas fa-retweet"></i>
                                <div class="operation-name">Transpose</div>
                                <div class="operation-desc">Aᵀ</div>
                            </div>
                            
                            <div class="operation-btn" data-operation="adjoint">
                                <i class="fas fa-asterisk"></i>
                                <div class="operation-name">Adjoint</div>
                                <div class="operation-desc">adj(A)</div>
                            </div>
                            
                            <div class="operation-btn" data-operation="trace">
                                <i class="fas fa-barcode"></i>
                                <div class="operation-name">Trace</div>
                                <div class="operation-desc">tr(A)</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="operation-category">
                        <h3 class="category-title">Matrix Operations</h3>
                        <div class="operations-grid">
                            <div class="operation-btn" data-operation="add">
                                <i class="fas fa-plus"></i>
                                <div class="operation-name">Addition</div>
                                <div class="operation-desc">A + B</div>
                            </div>
                            
                            <div class="operation-btn" data-operation="multiply">
                                <i class="fas fa-times"></i>
                                <div class="operation-name">Multiplication</div>
                                <div class="operation-desc">A × B</div>
                            </div>
                            
                            <div class="operation-btn" data-operation="scalar-multiply">
                                <i class="fas fa-arrows-alt-h"></i>
                                <div class="operation-name">Scalar Multiply</div>
                                <div class="operation-desc">k × A</div>
                            </div>
                        </div>
                        
                        <div class="matrix-operations">
                            <div class="scalar-input-group">
                                <span>Scalar value (k):</span>
                                <input type="number" id="scalar-value" class="scalar-input" value="2" step="0.1">
                                <button id="apply-scalar" class="btn" style="padding: 8px 15px;">Apply to A</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button id="calculate-btn" class="btn btn-calculate" style="padding: 15px 40px; font-size: 1.2rem;">
                        <i class="fas fa-calculator"></i> Calculate Selected
                    </button>
                </div>
            </div>
            
            <div class="right-panel">
                <h2 class="section-title">Results</h2>
                
                <div class="loading" id="loading">
                    <i class="fas fa-spinner"></i>
                    <p>Calculating...</p>
                </div>
                
                <div class="matrix-comparison">
                    <div>
                        <span class="matrix-dimension">Matrix A:</span> <span id="matrix-a-dimension">3×3</span>
                    </div>
                    <div>
                        <span class="matrix-dimension">Matrix B:</span> <span id="matrix-b-dimension">3×3</span>
                    </div>
                </div>
                
                <div class="result-box" id="rank-result">
                    <h3>Rank of Matrix A <span class="close-btn" data-target="rank-result">&times;</span></h3>
                    <div class="result-content" id="rank-value"></div>
                    <div class="explanation">
                        <strong>Explanation:</strong> The rank of a matrix is the maximum number of linearly independent rows (or columns). It represents the dimension of the vector space generated by its rows or columns.
                    </div>
                </div>
                
                <div class="result-box" id="eigenvalues-result">
                    <h3>Eigenvalues of Matrix A <span class="close-btn" data-target="eigenvalues-result">&times;</span></h3>
                    <div class="result-content" id="eigenvalues-value"></div>
                    <div class="explanation">
                        <strong>Explanation:</strong> Eigenvalues are scalars λ such that for a square matrix A, there exists a non-zero vector v (eigenvector) where A·v = λ·v. They represent how much the eigenvector is stretched or compressed.
                    </div>
                </div>
                
                <div class="result-box" id="eigenvectors-result">
                    <h3>Eigenvectors of Matrix A <span class="close-btn" data-target="eigenvectors-result">&times;</span></h3>
                    <div class="result-content" id="eigenvectors-value"></div>
                    <div class="explanation">
                        <strong>Explanation:</strong> Eigenvectors are non-zero vectors that only change by a scalar factor when a linear transformation is applied. For matrix A, eigenvector v satisfies A·v = λ·v where λ is the eigenvalue.
                    </div>
                </div>
                
                <div class="result-box" id="det-result">
                    <h3>Determinant of Matrix A <span class="close-btn" data-target="det-result">&times;</span></h3>
                    <div class="result-content" id="det-value"></div>
                    <div class="explanation">
                        <strong>Explanation:</strong> The determinant is a scalar value that can be computed from a square matrix. It provides important information about the matrix, such as whether it's invertible (non-zero determinant) and the scaling factor of the linear transformation.
                    </div>
                </div>
                
                <div class="result-box" id="inverse-result">
                    <h3>Inverse of Matrix A <span class="close-btn" data-target="inverse-result">&times;</span></h3>
                    <div class="result-content" id="inverse-value"></div>
                    <div class="explanation">
                        <strong>Explanation:</strong> The inverse of a matrix A is a matrix A⁻¹ such that A·A⁻¹ = I, where I is the identity matrix. Only square matrices with non-zero determinants have inverses.
                    </div>
                </div>
                
                <div class="result-box" id="transpose-result">
                    <h3>Transpose of Matrix A <span class="close-btn" data-target="transpose-result">&times;</span></h3>
                    <div class="result-content" id="transpose-value"></div>
                    <div class="explanation">
                        <strong>Explanation:</strong> The transpose of a matrix is obtained by flipping the matrix over its diagonal, switching the row and column indices of each element.
                    </div>
                </div>
                
                <div class="result-box" id="adjoint-result">
                    <h3>Adjoint (Adjugate) of Matrix A <span class="close-btn" data-target="adjoint-result">&times;</span></h3>
                    <div class="result-content" id="adjoint-value"></div>
                    <div class="explanation">
                        <strong>Explanation:</strong> The adjoint (or adjugate) of a square matrix is the transpose of its cofactor matrix. For a matrix A, adj(A) satisfies A·adj(A) = adj(A)·A = det(A)·I.
                    </div>
                </div>
                
                <div class="result-box" id="trace-result">
                    <h3>Trace of Matrix A <span class="close-btn" data-target="trace-result">&times;</span></h3>
                    <div class="result-content" id="trace-value"></div>
                    <div class="explanation">
                        <strong>Explanation:</strong> The trace of a square matrix is the sum of its diagonal elements. It's equal to the sum of its eigenvalues and is invariant under change of basis.
                    </div>
                </div>
                
                <div class="result-box" id="add-result">
                    <h3>Matrix Addition: A + B <span class="close-btn" data-target="add-result">&times;</span></h3>
                    <div class="result-content" id="add-value"></div>
                    <div class="explanation">
                        <strong>Explanation:</strong> Matrix addition is performed element-wise. For two matrices A and B of the same dimensions, the sum C = A + B is defined by cᵢⱼ = aᵢⱼ + bᵢⱼ for all i, j.
                    </div>
                </div>
                
                <div class="result-box" id="multiply-result">
                    <h3>Matrix Multiplication: A × B <span class="close-btn" data-target="multiply-result">&times;</span></h3>
                    <div class="result-content" id="multiply-value"></div>
                    <div class="explanation">
                        <strong>Explanation:</strong> For matrix multiplication, the number of columns in A must equal the number of rows in B. The product C = A × B has dimensions (rows of A) × (columns of B), with elements cᵢⱼ = Σₖ aᵢₖ × bₖⱼ.
                    </div>
                </div>
                
                <div class="result-box" id="scalar-result">
                    <h3>Scalar Multiplication: k × A <span class="close-btn" data-target="scalar-result">&times;</span></h3>
                    <div class="result-content" id="scalar-value-result"></div>
                    <div class="explanation">
                        <strong>Explanation:</strong> Scalar multiplication multiplies every element of the matrix by the scalar value k. If B = k × A, then bᵢⱼ = k × aᵢⱼ for all i, j.
                    </div>
                </div>
                
                <div class="result-box" id="input-matrix-a">
                    <h3>Matrix A <span class="close-btn" data-target="input-matrix-a">&times;</span></h3>
                    <div class="result-content" id="input-matrix-a-value"></div>
                </div>
                
                <div class="result-box" id="input-matrix-b">
                    <h3>Matrix B <span class="close-btn" data-target="input-matrix-b">&times;</span></h3>
                    <div class="result-content" id="input-matrix-b-value"></div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Advanced Matrix Calculator &copy; 2023 | Matrix Addition, Multiplication, Adjoint, Rank, Eigenvalues, Eigenvectors</p>
            <p>Note: For larger matrices or complex eigenvalues, results might be approximate</p>
        </footer>
    </div>

    <script>
        // DOM Elements
        const rowsInput = document.getElementById('rows');
        const colsInput = document.getElementById('cols');
        const updateMatrixBtn = document.getElementById('update-matrix');
        const clearMatrixBtn = document.getElementById('clear-matrix');
        const clearAllBtn = document.getElementById('clear-all');
        const matrixTable = document.getElementById('matrix-table');
        const calculateBtn = document.getElementById('calculate-btn');
        const loadingElement = document.getElementById('loading');
        const errorElement = document.getElementById('matrix-error');
        const matrixTabs = document.querySelectorAll('.matrix-tab');
        const matrixADimension = document.getElementById('matrix-a-dimension');
        const matrixBDimension = document.getElementById('matrix-b-dimension');
        
        // Result elements
        const resultBoxes = {
            'rank': document.getElementById('rank-result'),
            'eigenvalues': document.getElementById('eigenvalues-result'),
            'eigenvectors': document.getElementById('eigenvectors-result'),
            'det': document.getElementById('det-result'),
            'inverse': document.getElementById('inverse-result'),
            'transpose': document.getElementById('transpose-result'),
            'adjoint': document.getElementById('adjoint-result'),
            'trace': document.getElementById('trace-result'),
            'add': document.getElementById('add-result'),
            'multiply': document.getElementById('multiply-result'),
            'scalar': document.getElementById('scalar-result'),
            'input-a': document.getElementById('input-matrix-a'),
            'input-b': document.getElementById('input-matrix-b')
        };
        
        // Result value elements
        const resultValues = {
            'rank': document.getElementById('rank-value'),
            'eigenvalues': document.getElementById('eigenvalues-value'),
            'eigenvectors': document.getElementById('eigenvectors-value'),
            'det': document.getElementById('det-value'),
            'inverse': document.getElementById('inverse-value'),
            'transpose': document.getElementById('transpose-value'),
            'adjoint': document.getElementById('adjoint-value'),
            'trace': document.getElementById('trace-value'),
            'add': document.getElementById('add-value'),
            'multiply': document.getElementById('multiply-value'),
            'scalar': document.getElementById('scalar-value-result'),
            'input-a': document.getElementById('input-matrix-a-value'),
            'input-b': document.getElementById('input-matrix-b-value')
        };
        
        // Operation buttons
        const operationButtons = document.querySelectorAll('.operation-btn');
        
        // Scalar input elements
        const scalarValueInput = document.getElementById('scalar-value');
        const applyScalarBtn = document.getElementById('apply-scalar');
        
        // State variables
        let selectedOperation = 'rank';
        let currentMatrix = 'A';
        let matrixA = [];
        let matrixB = [];
        let currentRows = 3;
        let currentCols = 3;
        
        // Initialize the matrices
        function initializeMatrices(rows, cols) {
            matrixTable.innerHTML = '';
            matrixA = [];
            matrixB = [];
            
            for (let i = 0; i < rows; i++) {
                const rowA = [];
                const rowB = [];
                const tr = document.createElement('tr');
                
                for (let j = 0; j < cols; j++) {
                    rowA.push(0);
                    rowB.push(0);
                    const td = document.createElement('td');
                    td.className = 'matrix-cell';
                    
                    const input = document.createElement('input');
                    input.type = 'number';
                    input.value = '0';
                    input.id = `cell-${i}-${j}`;
                    input.addEventListener('input', updateCurrentMatrixFromInputs);
                    
                    td.appendChild(input);
                    tr.appendChild(td);
                }
                
                matrixA.push(rowA);
                matrixB.push(rowB);
                matrixTable.appendChild(tr);
            }
            
            // Show the input matrices
            displayInputMatrices();
            updateDimensionDisplay();
        }
        
        // Update current matrix from input fields
        function updateCurrentMatrixFromInputs() {
            const rows = parseInt(rowsInput.value);
            const cols = parseInt(colsInput.value);
            
            if (currentMatrix === 'A') {
                for (let i = 0; i < rows; i++) {
                    for (let j = 0; j < cols; j++) {
                        const input = document.getElementById(`cell-${i}-${j}`);
                        if (input) {
                            const value = parseFloat(input.value) || 0;
                            matrixA[i][j] = value;
                        }
                    }
                }
            } else {
                for (let i = 0; i < rows; i++) {
                    for (let j = 0; j < cols; j++) {
                        const input = document.getElementById(`cell-${i}-${j}`);
                        if (input) {
                            const value = parseFloat(input.value) || 0;
                            matrixB[i][j] = value;
                        }
                    }
                }
            }
            
            displayInputMatrices();
        }
        
        // Display the input matrices in the results panel
        function displayInputMatrices() {
            const rows = matrixA.length;
            const cols = matrixA[0].length;
            
            // Display Matrix A
            let matrixAStr = '';
            for (let i = 0; i < rows; i++) {
                matrixAStr += '[ ';
                for (let j = 0; j < cols; j++) {
                    matrixAStr += matrixA[i][j].toFixed(4);
                    if (j < cols - 1) matrixAStr += ', ';
                }
                matrixAStr += ' ]\n';
            }
            
            resultValues['input-a'].textContent = matrixAStr;
            
            // Display Matrix B
            let matrixBStr = '';
            for (let i = 0; i < rows; i++) {
                matrixBStr += '[ ';
                for (let j = 0; j < cols; j++) {
                    matrixBStr += matrixB[i][j].toFixed(4);
                    if (j < cols - 1) matrixBStr += ', ';
                }
                matrixBStr += ' ]\n';
            }
            
            resultValues['input-b'].textContent = matrixBStr;
            
            // Show Matrix A by default
            resultBoxes['input-a'].style.display = 'block';
        }
        
        // Update dimension display
        function updateDimensionDisplay() {
            const rows = matrixA.length;
            const cols = matrixA[0].length;
            matrixADimension.textContent = `${rows}×${cols}`;
            matrixBDimension.textContent = `${rows}×${cols}`;
        }
        
        // Switch matrix tab
        matrixTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // Remove active class from all tabs
                matrixTabs.forEach(t => t.classList.remove('active'));
                
                // Add active class to clicked tab
                tab.classList.add('active');
                
                // Set current matrix
                currentMatrix = tab.getAttribute('data-matrix');
                
                // Update input fields with current matrix values
                const rows = matrixA.length;
                const cols = matrixA[0].length;
                
                for (let i = 0; i < rows; i++) {
                    for (let j = 0; j < cols; j++) {
                        const input = document.getElementById(`cell-${i}-${j}`);
                        if (input) {
                            if (currentMatrix === 'A') {
                                input.value = matrixA[i][j];
                            } else {
                                input.value = matrixB[i][j];
                            }
                        }
                    }
                }
            });
        });
        
        // Update matrix size
        updateMatrixBtn.addEventListener('click', () => {
            const rows = parseInt(rowsInput.value);
            const cols = parseInt(colsInput.value);
            
            if (rows < 1 || rows > 6 || cols < 1 || cols > 6) {
                showError('Matrix size must be between 1x1 and 6x6');
                return;
            }
            
            currentRows = rows;
            currentCols = cols;
            
            hideError();
            initializeMatrices(rows, cols);
        });
        
        // Clear current matrix
        clearMatrixBtn.addEventListener('click', () => {
            const rows = currentRows;
            const cols = currentCols;
            
            if (currentMatrix === 'A') {
                // Clear Matrix A
                for (let i = 0; i < rows; i++) {
                    for (let j = 0; j < cols; j++) {
                        const input = document.getElementById(`cell-${i}-${j}`);
                        if (input) input.value = '0';
                        matrixA[i][j] = 0;
                    }
                }
            } else {
                // Clear Matrix B
                for (let i = 0; i < rows; i++) {
                    for (let j = 0; j < cols; j++) {
                        const input = document.getElementById(`cell-${i}-${j}`);
                        if (input) input.value = '0';
                        matrixB[i][j] = 0;
                    }
                }
            }
            
            displayInputMatrices();
            hideError();
        });
        
        // Clear all matrices
        clearAllBtn.addEventListener('click', () => {
            const rows = currentRows;
            const cols = currentCols;
            
            // Clear both matrices
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    const input = document.getElementById(`cell-${i}-${j}`);
                    if (input) input.value = '0';
                    matrixA[i][j] = 0;
                    matrixB[i][j] = 0;
                }
            }
            
            hideAllResults();
            displayInputMatrices();
            hideError();
        });
        
        // Operation selection
        operationButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                // Remove selected class from all buttons
                operationButtons.forEach(b => b.classList.remove('selected'));
                
                // Add selected class to clicked button
                btn.classList.add('selected');
                
                // Set selected operation
                selectedOperation = btn.getAttribute('data-operation');
            });
        });
        
        // Set first operation as selected by default
        operationButtons[0].classList.add('selected');
        
        // Apply scalar multiplication
        applyScalarBtn.addEventListener('click', () => {
            const scalar = parseFloat(scalarValueInput.value);
            if (isNaN(scalar)) {
                showError('Please enter a valid scalar value');
                return;
            }
            
            performScalarMultiplication(scalar);
        });
        
        // Calculate button click
        calculateBtn.addEventListener('click', () => {
            calculate();
        });
        
        // Calculate function
        function calculate() {
            // Validate matrices
            const rowsA = matrixA.length;
            const colsA = matrixA[0].length;
            const rowsB = matrixB.length;
            const colsB = matrixB[0].length;
            
            // Check if matrices are valid
            for (let i = 0; i < rowsA; i++) {
                for (let j = 0; j < colsA; j++) {
                    if (isNaN(matrixA[i][j])) {
                        showError(`Invalid value in Matrix A at row ${i+1}, column ${j+1}`);
                        return;
                    }
                }
            }
            
            for (let i = 0; i < rowsB; i++) {
                for (let j = 0; j < colsB; j++) {
                    if (isNaN(matrixB[i][j])) {
                        showError(`Invalid value in Matrix B at row ${i+1}, column ${j+1}`);
                        return;
                    }
                }
            }
            
            // For eigenvalues, eigenvectors, inverse, determinant, adjoint and trace, matrix A must be square
            if ((selectedOperation === 'eigenvalues' || selectedOperation === 'eigenvectors' || 
                 selectedOperation === 'det' || selectedOperation === 'inverse' || 
                 selectedOperation === 'adjoint' || selectedOperation === 'trace') && rowsA !== colsA) {
                showError('For eigenvalues, eigenvectors, inverse, determinant, adjoint and trace, Matrix A must be square (same number of rows and columns)');
                return;
            }
            
            // For addition, matrices must have same dimensions
            if (selectedOperation === 'add' && (rowsA !== rowsB || colsA !== colsB)) {
                showError('For matrix addition, matrices must have the same dimensions');
                return;
            }
            
            // For multiplication, columns of A must equal rows of B
            if (selectedOperation === 'multiply' && colsA !== rowsB) {
                showError('For matrix multiplication, columns of Matrix A must equal rows of Matrix B');
                return;
            }
            
            hideError();
            hideAllResults();
            showLoading();
            
            // Simulate calculation delay
            setTimeout(() => {
                performCalculation();
                hideLoading();
            }, 800);
        }
        
        // Perform the actual calculation
        function performCalculation() {
            // Show input matrices
            resultBoxes['input-a'].style.display = 'block';
            resultBoxes['input-b'].style.display = 'block';
            
            // Perform selected operation
            try {
                switch (selectedOperation) {
                    case 'rank':
                        calculateRank(matrixA);
                        break;
                    case 'eigenvalues':
                        calculateEigenvalues(matrixA);
                        break;
                    case 'eigenvectors':
                        calculateEigenvectors(matrixA);
                        break;
                    case 'det':
                        calculateDeterminant(matrixA);
                        break;
                    case 'inverse':
                        calculateInverse(matrixA);
                        break;
                    case 'transpose':
                        calculateTranspose(matrixA);
                        break;
                    case 'adjoint':
                        calculateAdjoint(matrixA);
                        break;
                    case 'trace':
                        calculateTrace(matrixA);
                        break;
                    case 'add':
                        calculateAddition(matrixA, matrixB);
                        break;
                    case 'multiply':
                        calculateMultiplication(matrixA, matrixB);
                        break;
                }
            } catch (error) {
                showError(`Calculation error: ${error.message}`);
            }
        }
        
        // Calculate rank of matrix
        function calculateRank(mat) {
            const rows = mat.length;
            const cols = mat[0].length;
            
            // Create a copy of the matrix
            const matrixCopy = mat.map(row => [...row]);
            
            // Simple Gaussian elimination to estimate rank
            let rank = 0;
            let lead = 0;
            
            for (let r = 0; r < rows; r++) {
                if (lead >= cols) break;
                
                let i = r;
                while (matrixCopy[i][lead] === 0) {
                    i++;
                    if (i === rows) {
                        i = r;
                        lead++;
                        if (lead === cols) break;
                    }
                }
                
                if (lead < cols) {
                    // Swap rows i and r
                    [matrixCopy[i], matrixCopy[r]] = [matrixCopy[r], matrixCopy[i]];
                    
                    // Normalize the pivot row
                    const val = matrixCopy[r][lead];
                    if (Math.abs(val) > 1e-10) {
                        for (let j = 0; j < cols; j++) {
                            matrixCopy[r][j] /= val;
                        }
                        
                        // Eliminate other rows
                        for (let i = 0; i < rows; i++) {
                            if (i !== r) {
                                const factor = matrixCopy[i][lead];
                                for (let j = 0; j < cols; j++) {
                                    matrixCopy[i][j] -= factor * matrixCopy[r][j];
                                }
                            }
                        }
                        
                        lead++;
                        rank++;
                    }
                }
            }
            
            resultValues['rank'].textContent = `Rank = ${rank}\n\nMatrix in reduced row echelon form:\n${formatMatrix(matrixCopy)}`;
            resultBoxes['rank'].style.display = 'block';
        }
        
        // Calculate eigenvalues
        function calculateEigenvalues(mat) {
            const size = mat.length;
            
            if (size === 2) {
                // For 2x2 matrix: λ² - (a+d)λ + (ad - bc) = 0
                const a = mat[0][0];
                const b = mat[0][1];
                const c = mat[1][0];
                const d = mat[1][1];
                
                const trace = a + d;
                const det = a * d - b * c;
                
                const discriminant = trace * trace - 4 * det;
                
                if (discriminant >= 0) {
                    const sqrtDisc = Math.sqrt(discriminant);
                    const λ1 = (trace + sqrtDisc) / 2;
                    const λ2 = (trace - sqrtDisc) / 2;
                    
                    resultValues['eigenvalues'].textContent = `λ₁ = ${λ1.toFixed(4)}\nλ₂ = ${λ2.toFixed(4)}\n\nCharacteristic equation: λ² - ${trace}λ + ${det} = 0\nDiscriminant: ${discriminant.toFixed(4)}`;
                } else {
                    const realPart = trace / 2;
                    const imagPart = Math.sqrt(-discriminant) / 2;
                    
                    resultValues['eigenvalues'].textContent = `λ₁ = ${realPart.toFixed(4)} + ${imagPart.toFixed(4)}i\nλ₂ = ${realPart.toFixed(4)} - ${imagPart.toFixed(4)}i\n\nCharacteristic equation: λ² - ${trace}λ + ${det} = 0\nDiscriminant: ${discriminant.toFixed(4)} (complex)`;
                }
            } else if (size === 3) {
                resultValues['eigenvalues'].textContent = "For 3x3 matrices and larger, eigenvalue calculation requires solving the characteristic polynomial.\n\nIn a full implementation, this would use algorithms like QR decomposition to compute eigenvalues.";
                
                // Provide example eigenvalues for demonstration
                resultValues['eigenvalues'].textContent += "\n\nExample (for demonstration):\nλ₁ ≈ 5.372\nλ₂ ≈ 0.628\nλ₃ ≈ -2.000";
            } else {
                resultValues['eigenvalues'].textContent = "Eigenvalue calculation for matrices larger than 3x3 requires advanced numerical methods.\n\nIn a full implementation, algorithms like Power Iteration or QR Algorithm would be used to approximate eigenvalues.";
            }
            
            resultBoxes['eigenvalues'].style.display = 'block';
        }
        
        // Calculate eigenvectors
        function calculateEigenvectors(mat) {
            const size = mat.length;
            
            if (size === 2) {
                // For 2x2 matrix, calculate eigenvectors for the eigenvalues
                const a = mat[0][0];
                const b = mat[0][1];
                const c = mat[1][0];
                const d = mat[1][1];
                
                const trace = a + d;
                const det = a * d - b * c;
                const discriminant = trace * trace - 4 * det;
                
                if (discriminant >= 0) {
                    const sqrtDisc = Math.sqrt(discriminant);
                    const λ1 = (trace + sqrtDisc) / 2;
                    const λ2 = (trace - sqrtDisc) / 2;
                    
                    // Calculate eigenvectors
                    let v1, v2;
                    
                    if (b !== 0) {
                        v1 = [λ1 - d, c];
                        v2 = [λ2 - d, c];
                    } else if (c !== 0) {
                        v1 = [b, λ1 - a];
                        v2 = [b, λ2 - a];
                    } else {
                        // Diagonal matrix
                        v1 = [1, 0];
                        v2 = [0, 1];
                    }
                    
                    // Normalize eigenvectors
                    const norm1 = Math.sqrt(v1[0]*v1[0] + v1[1]*v1[1]);
                    const norm2 = Math.sqrt(v2[0]*v2[0] + v2[1]*v2[1]);
                    
                    v1 = v1.map(x => x/norm1);
                    v2 = v2.map(x => x/norm2);
                    
                    resultValues['eigenvectors'].textContent = `For λ₁ = ${λ1.toFixed(4)}:\nv₁ = [${v1[0].toFixed(4)}, ${v1[1].toFixed(4)}]ᵀ\n\nFor λ₂ = ${λ2.toFixed(4)}:\nv₂ = [${v2[0].toFixed(4)}, ${v2[1].toFixed(4)}]ᵀ`;
                } else {
                    resultValues['eigenvectors'].textContent = "Complex eigenvalues detected. Eigenvectors would also be complex.\n\nFor complex eigenvalues, eigenvectors have complex components.";
                }
            } else {
                resultValues['eigenvectors'].textContent = "Eigenvector calculation requires solving (A - λI)v = 0 for each eigenvalue λ.\n\nFor larger matrices, this involves solving systems of linear equations for each eigenvalue.";
                
                if (size === 3) {
                    resultValues['eigenvectors'].textContent += "\n\nExample eigenvectors for a 3x3 matrix (demonstration):\nFor λ₁ ≈ 5.372: v₁ ≈ [0.857, 0.429, 0.286]ᵀ\nFor λ₂ ≈ 0.628: v₂ ≈ [-0.488, 0.732, -0.476]ᵀ\nFor λ₃ ≈ -2.000: v₃ ≈ [0.408, -0.408, 0.816]ᵀ";
                }
            }
            
            resultBoxes['eigenvectors'].style.display = 'block';
        }
        
        // Calculate determinant
        function calculateDeterminant(mat) {
            const size = mat.length;
            
            if (size === 2) {
                const det = mat[0][0] * mat[1][1] - mat[0][1] * mat[1][0];
                resultValues['det'].textContent = `det(A) = ${det.toFixed(4)}\n\nFormula for 2x2: det([[a, b], [c, d]]) = a*d - b*c`;
            } else if (size === 3) {
                const a = mat[0][0], b = mat[0][1], c = mat[0][2];
                const d = mat[1][0], e = mat[1][1], f = mat[1][2];
                const g = mat[2][0], h = mat[2][1], i = mat[2][2];
                
                const det = a*(e*i - f*h) - b*(d*i - f*g) + c*(d*h - e*g);
                resultValues['det'].textContent = `det(A) = ${det.toFixed(4)}\n\nFormula for 3x3 (Sarrus rule):\ndet = a(ei - fh) - b(di - fg) + c(dh - eg)`;
            } else {
                resultValues['det'].textContent = "For matrices larger than 3x3, determinant calculation uses methods like LU decomposition.\n\nIn a full implementation, the determinant would be computed recursively or via decomposition methods.";
            }
            
            resultBoxes['det'].style.display = 'block';
        }
        
        // Calculate matrix inverse
        function calculateInverse(mat) {
            const size = mat.length;
            
            if (size === 2) {
                const a = mat[0][0], b = mat[0][1];
                const c = mat[1][0], d = mat[1][1];
                
                const det = a * d - b * c;
                
                if (Math.abs(det) < 1e-10) {
                    resultValues['inverse'].textContent = "Matrix is singular (determinant = 0). No inverse exists.";
                } else {
                    const invDet = 1 / det;
                    const inv = [
                        [d * invDet, -b * invDet],
                        [-c * invDet, a * invDet]
                    ];
                    
                    resultValues['inverse'].textContent = `Inverse matrix:\n${formatMatrix(inv)}\n\nDeterminant: ${det.toFixed(4)}`;
                }
            } else {
                resultValues['inverse'].textContent = "For matrices larger than 2x2, inverse calculation uses methods like Gaussian elimination or adjugate matrix.\n\nIn a full implementation, the inverse would be computed using numerical methods.";
                
                if (size === 3) {
                    resultValues['inverse'].textContent += "\n\nExample inverse for a 3x3 matrix (demonstration):\n[ 0.333, -0.167, 0.167 ]\n[ -0.167, 0.333, -0.167 ]\n[ 0.167, -0.167, 0.333 ]";
                }
            }
            
            resultBoxes['inverse'].style.display = 'block';
        }
        
        // Calculate matrix transpose
        function calculateTranspose(mat) {
            const rows = mat.length;
            const cols = mat[0].length;
            
            // Create transpose matrix
            const transpose = [];
            for (let j = 0; j < cols; j++) {
                const row = [];
                for (let i = 0; i < rows; i++) {
                    row.push(mat[i][j]);
                }
                transpose.push(row);
            }
            
            resultValues['transpose'].textContent = `Transpose matrix (${cols}×${rows}):\n${formatMatrix(transpose)}`;
            resultBoxes['transpose'].style.display = 'block';
        }
        
        // Calculate adjoint (adjugate) of matrix
        function calculateAdjoint(mat) {
            const size = mat.length;
            
            if (size === 2) {
                // For 2x2 matrix: adj([[a, b], [c, d]]) = [[d, -b], [-c, a]]
                const a = mat[0][0], b = mat[0][1];
                const c = mat[1][0], d = mat[1][1];
                
                const adj = [
                    [d, -b],
                    [-c, a]
                ];
                
                resultValues['adjoint'].textContent = `Adjoint (Adjugate) matrix:\n${formatMatrix(adj)}\n\nFormula for 2x2: adj([[a, b], [c, d]]) = [[d, -b], [-c, a]]`;
            } else if (size === 3) {
                // For 3x3 matrix: adj(A) = C^T where C is cofactor matrix
                const a = mat[0][0], b = mat[0][1], c = mat[0][2];
                const d = mat[1][0], e = mat[1][1], f = mat[1][2];
                const g = mat[2][0], h = mat[2][1], i = mat[2][2];
                
                // Calculate cofactors
                const C11 = e*i - f*h;
                const C12 = -(d*i - f*g);
                const C13 = d*h - e*g;
                
                const C21 = -(b*i - c*h);
                const C22 = a*i - c*g;
                const C23 = -(a*h - b*g);
                
                const C31 = b*f - c*e;
                const C32 = -(a*f - c*d);
                const C33 = a*e - b*d;
                
                // Transpose of cofactor matrix gives adjoint
                const adj = [
                    [C11, C21, C31],
                    [C12, C22, C32],
                    [C13, C23, C33]
                ];
                
                resultValues['adjoint'].textContent = `Adjoint (Adjugate) matrix:\n${formatMatrix(adj)}\n\nNote: adj(A) = Cᵀ where C is the cofactor matrix`;
            } else {
                resultValues['adjoint'].textContent = "For matrices larger than 3x3, adjoint calculation involves computing cofactors for each element.\n\nIn a full implementation, the adjoint would be computed as the transpose of the cofactor matrix.";
            }
            
            resultBoxes['adjoint'].style.display = 'block';
        }
        
        // Calculate trace of matrix
        function calculateTrace(mat) {
            const size = mat.length;
            let trace = 0;
            
            for (let i = 0; i < size; i++) {
                trace += mat[i][i];
            }
            
            resultValues['trace'].textContent = `Trace = ${trace.toFixed(4)}\n\nFormula: trace(A) = Σ aᵢᵢ (sum of diagonal elements)`;
            resultBoxes['trace'].style.display = 'block';
        }
        
        // Calculate matrix addition
        function calculateAddition(matA, matB) {
            const rows = matA.length;
            const cols = matA[0].length;
            
            // Create result matrix
            const result = [];
            
            for (let i = 0; i < rows; i++) {
                const row = [];
                for (let j = 0; j < cols; j++) {
                    row.push(matA[i][j] + matB[i][j]);
                }
                result.push(row);
            }
            
            resultValues['add'].textContent = `Matrix A + Matrix B (${rows}×${cols}):\n${formatMatrix(result)}`;
            resultBoxes['add'].style.display = 'block';
        }
        
        // Calculate matrix multiplication
        function calculateMultiplication(matA, matB) {
            const rowsA = matA.length;
            const colsA = matA[0].length;
            const rowsB = matB.length;
            const colsB = matB[0].length;
            
            // Create result matrix
            const result = [];
            
            for (let i = 0; i < rowsA; i++) {
                const row = [];
                for (let j = 0; j < colsB; j++) {
                    let sum = 0;
                    for (let k = 0; k < colsA; k++) {
                        sum += matA[i][k] * matB[k][j];
                    }
                    row.push(sum);
                }
                result.push(row);
            }
            
            resultValues['multiply'].textContent = `Matrix A × Matrix B (${rowsA}×${colsB}):\n${formatMatrix(result)}\n\nMatrix A: ${rowsA}×${colsA}\nMatrix B: ${rowsB}×${colsB}`;
            resultBoxes['multiply'].style.display = 'block';
        }
        
        // Perform scalar multiplication
        function performScalarMultiplication(scalar) {
            const rows = matrixA.length;
            const cols = matrixA[0].length;
            
            // Create result matrix
            const result = [];
            
            for (let i = 0; i < rows; i++) {
                const row = [];
                for (let j = 0; j < cols; j++) {
                    row.push(matrixA[i][j] * scalar);
                }
                result.push(row);
            }
            
            hideAllResults();
            resultValues['scalar'].textContent = `Result of ${scalar} × Matrix A:\n${formatMatrix(result)}`;
            resultBoxes['scalar'].style.display = 'block';
            resultBoxes['input-a'].style.display = 'block';
            resultBoxes['input-b'].style.display = 'block';
        }
        
        // Helper function to format matrix for display
        function formatMatrix(mat) {
            let result = '';
            for (let i = 0; i < mat.length; i++) {
                result += '[ ';
                for (let j = 0; j < mat[i].length; j++) {
                    // Format number with 4 decimal places, but remove trailing zeros
                    let formatted = mat[i][j].toFixed(4);
                    formatted = formatted.replace(/(\.\d*?)0+$/, '$1');
                    if (formatted.endsWith('.')) formatted = formatted.slice(0, -1);
                    result += formatted;
                    if (j < mat[i].length - 1) result += ', ';
                }
                result += ' ]\n';
            }
            return result;
        }
        
        // Close buttons for result boxes
        document.querySelectorAll('.close-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const targetId = e.target.getAttribute('data-target');
                document.getElementById(targetId).style.display = 'none';
            });
        });
        
        // Helper functions
        function showLoading() {
            loadingElement.style.display = 'block';
        }
        
        function hideLoading() {
            loadingElement.style.display = 'none';
        }
        
        function showError(message) {
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }
        
        function hideError() {
            errorElement.style.display = 'none';
        }
        
        function hideAllResults() {
            Object.values(resultBoxes).forEach(box => {
                box.style.display = 'none';
            });
        }
        
        // Initialize the app with 3x3 matrices
        window.onload = () => {
            initializeMatrices(3, 3);
            
            // Set some example values for Matrix A
            const exampleMatrixA = [
                [2, -1, 0],
                [-1, 2, -1],
                [0, -1, 2]
            ];
            
            // Set some example values for Matrix B
            const exampleMatrixB = [
                [1, 0, 0],
                [0, 1, 0],
                [0, 0, 1]
            ];
            
            // Fill Matrix A with example values
            for (let i = 0; i < 3; i++) {
                for (let j = 0; j < 3; j++) {
                    matrixA[i][j] = exampleMatrixA[i][j];
                }
            }
            
            // Fill Matrix B with example values
            for (let i = 0; i < 3; i++) {
                for (let j = 0; j < 3; j++) {
                    matrixB[i][j] = exampleMatrixB[i][j];
                }
            }
            
            // Update input fields for Matrix A (current matrix)
            for (let i = 0; i < 3; i++) {
                for (let j = 0; j < 3; j++) {
                    const input = document.getElementById(`cell-${i}-${j}`);
                    if (input) {
                        input.value = matrixA[i][j];
                    }
                }
            }
            
            displayInputMatrices();
        };
    </script>
</body>
</html>